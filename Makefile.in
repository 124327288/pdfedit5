#top-level makefile for PDF editor

EXTRA_CFLAGS=@EXTRA_CFLAGS@
EXTRA_CXXFLAGS=@EXTRA_CXXFLAGS@

.PHONY: distclean clean doc src install all regen

#make PDF editor - source and documentation
all: src doc

#install PDF editor
install: src
	cd src && make install

#uninstall PDF editor
uninstall:
	cd src && make uninstall

#make documentation
#GNU make is required to build documentation, BSD make will not work
#GNU make is installed sometimes as gmake, sometimes as make
doc:
	cd doc && ( gmake || make )

#Minimal documentation needed to proper installation
#(documentation must be build for it to be instlled & used)
doc-dist:
	cd doc && ( gmake doc_dist|| make doc_dist )

#make application
src: doc-dist
	cd src && make

#cleanup
clean:
	cd doc/user && make clean
	cd src && make clean
	rm -f config.log

#dist cleanup
distclean:
	cd doc/user && make clean
	cd src && make distclean
	rm -f Makefile config.status config.log config.pro config.pro.in src/Makefile.flags

#re-generate programmer documentation
regen:
	cd doc && doxygen