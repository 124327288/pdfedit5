#========================================================================
#
# Splash library Makefile
#
# Copyright 2003 Glyph & Cog, LLC
#
#========================================================================
# includes basic building rules
# REL_ADDR has to be defined, because Makefile.rules refers 
# to the Makefile.flags
REL_ADDR = ../../../
include $(REL_ADDR)/Makefile.rules

CXX_SRC = \
	Splash.cc \
	SplashBitmap.cc \
	SplashClip.cc \
	SplashFTFont.cc \
	SplashFTFontEngine.cc \
	SplashFTFontFile.cc \
	SplashFont.cc \
	SplashFontEngine.cc \
	SplashFontFile.cc \
	SplashFontFileID.cc \
	SplashPath.cc \
	SplashPattern.cc \
	SplashScreen.cc \
	SplashState.cc \
	SplashT1Font.cc \
	SplashT1FontEngine.cc \
	SplashT1FontFile.cc \
	SplashXPath.cc \
	SplashXPathScanner.cc

#------------------------------------------------------------------------

all: $(LIBPREFIX)splash.a

#------------------------------------------------------------------------

SPLASH_OBJS = \
	Splash.o \
	SplashBitmap.o \
	SplashClip.o \
	SplashFTFont.o \
	SplashFTFontEngine.o \
	SplashFTFontFile.o \
	SplashFont.o \
	SplashFontEngine.o \
	SplashFontFile.o \
	SplashFontFileID.o \
	SplashPath.o \
	SplashPattern.o \
	SplashScreen.o \
	SplashState.o \
	SplashT1Font.o \
	SplashT1FontEngine.o \
	SplashT1FontFile.o \
	SplashXPath.o \
	SplashXPathScanner.o

$(LIBPREFIX)splash.a: $(SPLASH_OBJS)
	$(DEL_FILE) $(LIBPREFIX)splash.a
	$(AR) $(LIBPREFIX)splash.a $(SPLASH_OBJS)
	$(RANLIB) $(LIBPREFIX)splash.a

#------------------------------------------------------------------------

clean:
	$(DEL_FILE) $(SPLASH_OBJS) $(LIBPREFIX)splash.a

#------------------------------------------------------------------------

# FIXME Makefile.dep fails because of SplashFTFont*.h which include from 
# macro defined file name
Makefile.dep:
	-$(CXX) $(XPDFLAGS) -MM $(CXX_SRC) >Makefile.dep

# FIXME  FreeBSD make is not able to include non existent file
#include Makefile.dep
