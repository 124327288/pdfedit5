#========================================================================
#
# FoFi library Makefile
#
# Copyright 2003 Glyph & Cog, LLC
#
#========================================================================

# includes basic building rules
# REL_ADDR has to be defined, because Makefile.rules refers 
# to the Makefile.flags
REL_ADDR = ../../../
include $(REL_ADDR)/Makefile.rules

CXX_SRC = \
	FoFiBase.cc \
	FoFiEncodings.cc \
	FoFiTrueType.cc \
	FoFiType1.cc \
	FoFiType1C.cc

HEADERS = \
	FoFiBase.h \
	FoFiEncodings.h \
	FoFiTrueType.h \
	FoFiType1.h \
	FoFiType1C.h \
#------------------------------------------------------------------------

TARGET = $(LIBPREFIX)fofi.a
all: $(TARGET)

staticlib: $(TARGET)

#------------------------------------------------------------------------

FOFI_OBJS = \
	FoFiBase.o \
	FoFiEncodings.o \
	FoFiTrueType.o \
	FoFiType1.o \
	FoFiType1C.o

$(TARGET): deps $(FOFI_OBJS)
	$(DEL_FILE) $(TARGET)
	$(AR) $(TARGET) $(FOFI_OBJS)
	$(RANLIB) $(TARGET)

#------------------------------------------------------------------------

clean:
	$(DEL_FILE) $(FOFI_OBJS) $(TARGET) deps

#------------------------------------------------------------------------

deps: $(HEADERS)
	$(CXX) $(MANDATORY_INCPATH) -M -MF deps $(CXX_SRC)

# This requires GNU make (or compatible) because deps file doesn't
# exist in time when invoked for the first time and thus has to
# be generated
include deps
